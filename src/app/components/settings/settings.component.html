<div class="settings-container">
  <mat-card class="settings-card">
    <mat-card-header>
      <mat-card-title>Settings</mat-card-title>
    </mat-card-header>
    <mat-card-content>
      <!-- Knowledge Levels Section -->
      <div class="settings-section">
        <h3>Knowledge Level</h3>
        <p class="settings-description">
          Select your knowledge level about Blue Prince to customize your experience.
          Higher knowledge levels will unlock more features.
        </p>

        <div class="knowledge-levels">
          <mat-radio-group [(ngModel)]="selectedKnowledgeLevel" (change)="selectKnowledgeLevel(selectedKnowledgeLevel)">
            <div *ngFor="let level of knowledgeLevels" class="knowledge-level">
              <mat-radio-button
                [value]="level.id"
                [disabled]="!level.enabled"
                color="primary">
                {{ level.label }}
              </mat-radio-button>
            </div>
          </mat-radio-group>
        </div>

        <div class="settings-info">
          <mat-icon>info</mat-icon>
          <p>
            Only the first two knowledge levels are currently available.
            More levels will be unlocked in future updates.
          </p>
        </div>
      </div>

      <!-- Appearance Settings Section -->
      <div class="settings-section">
        <h3>Appearance Settings</h3>
        <div class="theme-toggle-container">
          <mat-slide-toggle
            [(ngModel)]="darkMode"
            (change)="toggleDarkMode()"
            color="primary">
            Dark Mode
          </mat-slide-toggle>
          <p class="settings-description">
            Toggle between light and dark themes. By default, the app will follow your system's theme preference.
          </p>
        </div>
      </div>

      <!-- Map Settings Section -->
      <div class="settings-section">
        <h3>Map Settings</h3>
        <div class="row-flip-toggle-container">
          <mat-slide-toggle
            [(ngModel)]="flipRows"
            (change)="toggleRowFlip()"
            color="primary">
            Flip Row Numbers
          </mat-slide-toggle>
          <p class="settings-description">
            Toggle to flip the row numbers and remap the data (bottom row becomes top row).
          </p>
        </div>
      </div>

      <!-- Ads Settings Section -->
      <div class="settings-section">
        <h3>Advertisement Settings</h3>
        <div class="ads-toggle-container">
          <mat-slide-toggle
            [(ngModel)]="showAds"
            (change)="toggleAds()"
            color="primary">
            Show advertisements
          </mat-slide-toggle>
          <p class="settings-description">
            Toggle this setting to show or hide advertisements throughout the app.
            Ads helps support the development of Blue Journal.
          </p>
        </div>
      </div>

      <!-- App Installation Section -->
      <div class="settings-section" *ngIf="canInstallApp">
        <h3>Install App</h3>
        <p class="settings-description">
          Install Blue Journal on your device for a better experience. You'll be able to use the app offline and it will load faster.
        </p>
        <div class="support-links">
          <button mat-raised-button
                 color="primary"
                 (click)="installApp()"
                 class="support-button">
            <mat-icon>get_app</mat-icon>
            Install App
          </button>
        </div>
      </div>

      <!-- Support Section -->
      <div class="settings-section">
        <h3>Support the Developer</h3>
        <p class="settings-description">
          If you enjoy using Blue Journal, consider supporting the developer.
        </p>
        <div class="support-links">
          <a mat-raised-button
             color="primary"
             href="https://www.buymeacoffee.com/flutterscratch"
             target="_blank"
             class="support-button">
            <mat-icon>local_cafe</mat-icon>
            Buy Me a Coffee
          </a>
        </div>
      </div>
    </mat-card-content>
  </mat-card>
</div>
